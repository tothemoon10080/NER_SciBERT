An open pit mining operation is a complex system that constitutes several components or processes. An optimal production sequence that defines timing of extraction and a dynamic cut-off grade policy that defines the supply of materials from sources to destinations within the system are crucial to the success of an operation. In current practice, separate sequencing and cut-off grade models achieve these important milestones as part of strategic planning. This paper presents a mathematical model that derives the optimal extraction sequence and cut-off grade policy simultaneously considering grade uncertainty and stockpiling. A framework of genetic, maximum flow and cut-off grade algorithms solves this complex non-linear problem. An application of the method at realistic copper and gold mining operations reveals the value (up to 29% increase in discounted value) of stockpiling as well as risk quantification under uncertainty.An open pit mine refers to the extraction of raw mineral from the earth's surface. The valuable raw material (or ore) is processed and refined in processing facilities to generate the finished product. The waste material is discarded to waste dumps and the potential ore (not economical to process under existing economic conditions) is stored in stockpiles for possible future processing. Thus, a typical mining operation is a complex system that consists of several components or processes and optimization with respect to these operations aims to maximize the discounted value by generating a production schedule that delineates the supply of materials within this system ( Given a set of mining blocks that forms the orebody, the extraction sequence determines the extraction (whether to mine a block or not) and timing of extraction (if a block is mined, when to mine this block). Similarly, the cut-off grade guides the supply of materials from these blocks (sources) to destinations. The material with metal content or grade greater than or equal to a predefined cut-off grade is referred to as ore and is sent to processing streams. If material grade is below cut-off grade, it is referred to as waste and is sent to waste dumps ( Apart from geological inputs, the production scheduling and cut-off grade models consider economic and operational inputs. The economic parameters refer to the metal selling price, mining cost, processing cost, refining cost, fixed cost, and discount rate. The operational parameters refer to the metallurgical recovery as well as the mining, processing and refining capacities. For a mining operation comprising multiple processing streams, the operational parameters include the processing capacity, refining capacity and the metallurgical recovery associated with all processing streams. Most previous studies have addressed the development of extraction sequence and cut-off grade policy for open pit mining operations separately ( A few studies have integrated both the extraction sequence and the cut-off grade optimization. The work presented in this paper presents a mathematical model that offers simultaneous optimization of the extraction sequence and cut-off grade considering stockpiles and supply or grade uncertainty. More specifically, the model provides true optimal cut-off grades and maintains the non-linearity of the material blending constraints related to stockpile material handling. This leads to formulation of the problem in the form of stochastic mixed-integer quadratic programming. The model is then solved through an innovative genetic algorithm (GA) based framework that employs the maximum flow algorithm for defining the extraction sequence and two approaches using GA and Lane's methods for defining the cut-off grade policy that allocates material destinations within the mining system over the life of operation. The application of the proposed model and solution approach at actual copper and gold mining operations demonstrates the value of considering stockpiles and grade uncertainty. The proposed stochastic model maximizes the discounted value over the life of a mining operation and satisfies block precedence, reserve, production (mining, processing and refining) capacity and stockpile material handling constraints. Owing to the geological uncertainty, the structure of the formulation minimizes the risk due to deviations from mining, processing and refining targets. Moreover, mixing or blending of materials within the stockpile is natural and modeling this behavior leads to nonlinearity of the formulation as demonstrated by Indices:          Parameters:                Variables:        Given these knowns (parameters) and unknowns (variables), the mathematical representation of the problem in an objective function and applicable constraints is as follows. Objective function: Constraints: The objective function in Equation In a mine production scheduling problem, first the materials are extracted, then the destination (processing streams, stockpiles and waste dumps) of the materials is determined and finally the material (ore) sent to the processing streams is treated to produce the final product. Thus, the problem can be separated into three decision parts: A decision about the extraction sequence, i.e. if a block is extracted, then what is the timing of block extraction? Given the extraction sequence, a decision about the supply of materials to various destinations (stockpiles, processing streams, waste dumps) within the system. Given the available materials in the stockpile, a decision regarding the quantity of ore and metal to be moved from the stockpile to the processing streams. While the proposed method identifies these three distinct decision-making steps, an integrated optimization framework derives the solution to the problem simultaneously. Sections The extraction sequence problem is solved through the graph theory based maximum flow algorithm that represents all blocks as a node The economic value of mining block However, this Equation Given the extraction sequence In the stochastic model, a block can be an ore block in a simulated scenario and a waste block in another scenario. It is assumed that the ore blocks in all scenarios will have the same destination, i.e. if an ore block is sent to a stockpile then it will be done so in all scenarios, and if an ore block is sent to the processing unit then it will be done so in all scenarios. In this respect, first the weighted average grade The optimal cut-off classifies mining blocks as follows: Blocks with grade ( Blocks with grade ( Blocks with grade ( In this study, the GA introduced in Section To determine the cut-off grade within the GA framework, the cut-off grade The cut-off grade calculation in Lane's model considers the grade and tonnage distribution of the material and respects the production capacities of various mining operations. The objective of the model is to maximize the discounted cash flow subjected to mining, processing, and refining capacity constraints. The cash flow for the mining operation is Knowing these mining, processing and refining rates, Equation Here, Equation Given The supply of material from stockpiles may be required to meet the processing requirements and to determine the quantity of ore to be sent from the stockpile to the processing plant, and therefore a processing stream decision variable A genetic algorithm (GA) is a well-documented population-based evolutionary algorithm that is based on the principles of natural evolution ( The solution to complex problems through the implementation of a GA is a challenge as a large number of chromosomes become infeasible after any genetic operation ( Selection and crossover are the initial steps in the GA, where the population is randomly generated allowing it to create a wide range of possible solutions. Within the population, individuals are selected for inclusion in the mating pool. Individuals from the mating pool are used to generate two new offspring using a crossover operation, which forms the basis for the next generation. In this respect, roulette wheel selection ( Mutation is the next step, where a uniform mutation operation is used for the real-value population ( Parametric diversification then augments the traditional genetic operations to increase the efficiency of the GA. The chromosome is changed depending on the deviation from the operational constraints. The deviation is calculated as: In period Similarly, the processing stream decision variable would be reduced, increased or unchanged by a factor to adjust the quantity, if there is over-production, under-production, or no deviation from production, respectively. Accordingly, the cut-off grade variable (when the GA is used for the calculation) would be increased, decreased or unchanged by a factor to adjust the quantity if there is over-production, under-production, or no deviation from production, respectively. In Equations  1. Set stage for 2. Create the maximum flow graph structure for stage 3. Initialize population for genetic algorithm for stage 4. Generate solution 5. Using the randomly generated cut-off grade within genetic algorithm, determine 6. Estimate the quantity of material extracted from stockpile using the processing stream decision variable 7. Use results from step 4, 5 and 6 to estimate the objective function (Equation 8. Perform genetic operations. 9. Evaluate until the stopping criteria are met. 10.  Set stage for Create the maximum flow graph structure for stage Initialize population for genetic algorithm for stage Generate solution Determine the cut-off grade: Set the year Compute cash flow Implement golden section method to calculate the optimal cut-off grade through Equations Define     Calculate     While  If       Go to step 5.3.3. If       Go to step 5.3.3.  Cut-off grade is obtained after reaching stopping criteria for step 5.3.3. Based on the optimal cut-off grade determine the destination  Estimate the quantity of material extracted from stockpile using the processing stream decision variable Use results from step 4, 5 and 6 to estimate the objective function (Equation Perform genetic operations. Evaluate until the stopping criteria are met.  MATLAB was used to implement the proposed method and perform the respective numerical experiments on two realistic (actual) data sets from copper and gold mining operations.  - A production schedule is created without a stockpile option; - A production schedule is created with a stockpiling option with cut-off grade optimization and the GA deciding the destination policy for the ore blocks; - A production schedule is created with a stockpiling option with cut-off grade optimization and Lane's method deciding the destination policy for the ore blocks. Given that the proposed stochastic model is solved through a GA that relies on random choices, for valid comparisons, each Case is solved five times.   The maximum NPV is obtained using Lane's method for the cut-off grade optimization. Given the size of the problem due to numerous decision variables, Lane's method acts as an independent heuristic to guide the search, leading to an increase in the efficiency of the model compared to the random and systematic search in the GA. Apart from the three cases that reflect the value of the proposed method, it is worth exploring the contribution derived through a consideration of geological uncertainty. In this respect, a deterministic (or E-type) orebody model is created by averaging the grade from different realizations ( This paper proposes a framework for the simultaneous optimization of the production sequence and dynamic cut-off grades for open pit mining operations. The objective of the problem is to maximize the discounted value of future cash flows. The solution to the proposed model provides an optimal mining extraction sequence and a schedule of cut-off grades as a material destination policy within the supply chain of open pit mining operations. The proposed framework employs a maximum flow algorithm along with a GA to determine the extraction sequence and then the cut-off grade policy is determined within the GA or through an implementation of Lane's method. Application of the proposed method on actual copper and gold data sets demonstrates that an allowance for stockpiling as a material destination not only enhances the flexibility but also generates higher value. In addition, a combination of maximum flow algorithm for the extraction sequence and Lane's method for cut-off grades performs better than the alternative of defining the cut-off grades with a GA. The size of the problem and a diverse search space for the GA contributes to this difference as compared to the relatively straight forward implementation of Lane's method. The application confirms the value of incorporating grade uncertainty through simulating equally probable multiple orebody models as compared to the single estimate-based averaged or E-type orebody models, because significant gains are realized with respect to the discounted value of future cash flows. Amol Paithankar is grateful for the financial supported from the