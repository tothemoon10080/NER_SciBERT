The problem of mass balancing flowsheets with partial observation of stream components is considered. Minimization of relative error squares of stream components is used to determine the optimum set of balanced stream components and stream mass splits. Since the missing components do not contribute to the objective function, some of the optimization Lagrangian multipliers are equal or zeros. Furthermore, it is shown that some of the multipliers are dependent on the rest of the multipliers. The multipliers and a set of independent stream mass splits are used to search for the optimum solution. For a given partially observed data set, the maximum number of missing stream components that will still permit flowsheet mass balance is determined.In the past three decades, the mineral processing industry has come to recognize the importance of plant flowsheet mass balance (MB) as a tool for evaluating and improving plant performance In many cases, SCs (assays) are observed in all streams; however, there are cases where some of the SCs are missing or unavailable for measurement. At present, there is no systematic treatment of the problem of flowsheet mass balancing in the absence of some of the SCs. The main objectives of this paper are to: (i) investigate the problem of flowsheet MB with partial observation (PO) of SCs, (ii) identify the data configurations that produce singular solutions, and (iii) determine the maximum number of missing components (MCs) beyond which the data array no longer carries enough information to produce a MB. The approach adopted allows for the identification of singular cases and the determination of limits beyond which the PO data set fails to produce a MB. The paper begins by solving the flowsheet MB problem using full observation of SCs. The results are then extended to handle single- and multi-node flowsheet MB with PO of SCs. The symbols and notations used in the paper are defined in Given a multi-node flowsheet and a corresponding observed normalized SCs set, The solution of the optimization problem considered can be determined by investigating the necessary conditions for the stationary point of the Lagrangian Consider a single-node flowsheet with In general, the MCs are expressed using the adjacent observed SCs and implementing stream consistency conditions or NCMBs. If the stream Mass balance for different data sets with PO of SCs can be investigated by introducing single vertical, horizontal, and diagonal steps (i.e., a jump or move from one MC to the next, where there are no intermediate MCs (see Given a PO data array with no square or rectangular missing-component cells, let single vertical steps be used to connect all MCs in each column (stream). The successive single vertical steps in a column form a vertical line. The vertical lines and the columns containing single MC are connected sequentially, using single horizontal or diagonal steps. Therefore, we end up with a broken line passing through all the MCs, where the vertical lines are scanned only once in one direction. Note that the single horizontal or diagonal steps are interchangeable, however, such changes do not affect the step count. Each broken line has a set of diagonal, horizontal and vertical connectivity indices Assume a PO data set has Consider a single-node flowsheet with four streams (one input and three outputs) having Consider a square missing-component cell having the In configuration C, stream Configuration E is similar to configuration C except that In this case Since the The MB of multi-node flowsheets with PO of SCs can be investigated by utilizing the single-node results. The reference stream(s) and Multi-node flowsheets can be investigated by considering one node at a time and utilizing the single-node flowsheet results obtained in The succession from an initial node to the adjacent node can take different directions depending on whether it is an end or an intermediate node in the sequence of node numbering. All streams connected to the initial node are considered, however, in a succeeding (adjacent) node, any stream(s) already considered in the previous node(s) is (are) excluded and the new streams are considered. A succeeding node with the new streams forms “stream-reduced” node. This process is repeated from one node to the next until all nodes have been considered. The initial node streams could have a full broken line ( While the initial node and the stream-reduced nodes are assumed to have no square or rectangular missing-component cells because they lead to singular solutions, the MCs in the excluded streams of the stream-reduced node and the other streams MCs can form missing-component cells. In general, based on the flowsheet topology or connection matrix, all templates covering all possible initial-subsequent-nodes combinations are generated (similar to Considering a data configuration with full broken lines ( The data configurations where Since there are One approach is to use Since some of the Since the flowsheet is fully connected and having full broken lines at all nodes, In this case, the number of available A data set, A, having The flowsheet shown in For data set B-1 to B-3 and close examination of For data set B-4 to B-5 and close examination of Data set B-6 ( The cases considered in this section were tried using the “Solver” module (within Microsoft Excel) and converged to non-optimal and unrealistic solutions. However, when the results and constraints derived in this paper are imposed (e.g., balanced SCs equal observed SCs) the individual solutions converge to the results obtained using the proposed technique. An approach for flowsheet mass balancing in the presence of PO of SCs is proposed. The maximum numbers of MCs that still permit MB have been determined for single- and multi-node flowsheets. If the number of MCs exceeds the maximum value, the observed data do not carry sufficient information to generate a flowsheet MB. Naturally, as the number of MCs approaches the maximum value, the balanced data generated become strongly biased towards the observed data. Based on the results presented several conclusions are given below. ⋅ In single-node flowsheets, data arrays containing square or rectangular missing-component cells lead to singular solutions. In multi-node flowsheets, the same conclusion applies to the stream-reduced nodes of the flowsheet, however, the overall data array may contain missing-component cells between columns, which do not belong to the same node. ⋅ For single-node flowsheets, when ⋅ For multi-node flowsheets, when ⋅ The approach developed in this paper can be adapted to handle cases with PO of SCs using other forms of least-squares objective functions. Because at the extreme cases of In all cases, the MCs are determined by stream consistency and NCMBs using the observed SCs and SMSs. Furthermore, the results presented provide a road map for identifying the data configurations, which lead to singular solutions; and the identification process can be implemented on computer. The approach proposed provides mineral, oil sands, and coal processing engineers with a technique for flowsheet MB in the absence of full observation of SCs. observed stream component estimated stream component flowsheet connection (incident) matrix  submatrix of remaining submatrix of row echelon matrix of preceding submatrix of remaining submatrix of matrix with the submatrices unity matrix Lagrangian of the optimization problem submatrix number of components per stream number of selected independent stream mass splits number of internal nodes in the flowsheet number of selected reference stream mass splits number of streams in the flowsheet number of fully observed SCs (i.e., a component is observed in all streams), normally, the last a matrix formed by products of a matrix formed by matrix product of set of the reference and independent stream mass splits indices set of the dependent stream mass splits indices set of the reference stream mass splits indices matrix of estimated stream components excluding the  column matrix of the stream mass splits stream  constant multiplier of the optimization problem constant multiplier of the optimization problem single diagonal step from one missing component to the next in the data array single horizontal step from one missing component to the next in the data array single vertical step from one missing component to the next in the data array  matrix whose elements are the component mass balance at all nodes excluding the objective function of the optimization problem number of missing stream components in the observed data array maximum number of allowable missing stream components in the observed data array maximum number of allowable missing stream components in the observed data array excluding the last This work was supported in part by the federal Panel on Energy Research and Development (PERD). Let the connection (or incident) matrix associated with any flowsheet (or node-branch graph) be denoted as Let the indices (numbers) of the reference and independent SMSs be grouped in a set Let the estimated SCs (excluding last component) be arranged in matrix form as Since the indices of the SMSs