A combined fuzzy based feedforward (FBF) and bubble size distribution (BSD) based feedback reagent dosage control strategy is proposed to implement the product indices in copper roughing process. A fuzzy theory based feedforward compensator will be used to calculated the reagent dosage in advance to eliminate the influence of large disturbances according to ore grade and handling capacity. Since the bubble size is believed to be closely related to flotation performance and responds to changes in the reagent dosage, using BSD based feedback predictive control calculates the reagent dosage to stabilize the flotation running. Instead of simple statistic feature, the bubble size with non-Gaussian feature is characterized to be probability density function (PDF) by using B-spline. A multi-output least square support vector machine (MLS-SVM) based is then applied to establish a dynamical relationship between the weights of B-spline and the reagent dosage since the weights are interrelated and related to the reagent dosage. A multiple step based optimization algorithm is finally proposed to determine the reagent dosage. Experimental results can show the effectiveness of the proposed method.Froth flotation is an important approach to extract valuable minerals from ore according to physical and chemical properties of mineral surfaces. In this process, the chemical reagent which improve or decrease mineral's flotability is capable to implement effective separation of valuable minerals. In practice, the reagent dosage has very important influence on successful flotation. Less or excessive reagent dosage easily deteriorates flotation performance and results in product deficit. Therefore, control strategy for reagent dosage has paid close attention of both academic and industrial researchers. In Naik et al. (2005) a regression model is established to predict grade and recovery of combustible material for different reagent conditions by quantifying the effect of sodium meta silicate, collector and frother with factorial experiment data However, the workers monitor and optimize reagent dosage mainly by observing froth appearance characteristics in China, It is due to lack of testing equipment such as X-ray fluorescence analyzers in a lot of Chinese flotation plants. It heavily depends on frequent inspection and expert experience of the operators. To overcome the shortcomings of manual operation, image-based control and optimization research has been carried out extensively. Aldrich et al. think that the features of the surface froths of flotation cells can be used to monitor and control flotation running by use of machine learning techniques As one of the dominant visual features, the bubble size has a very important influence on probability of collision and adhesion between mineral particles and bubbles Since the bubble size is found to be non-Gaussian distribution, single statistical feature such as variance hardly characterize the distribution effectively However, it is noted that the long flotation process leads to large delay, and limits the control effects. If slurry properties change greatly, the unstable state of flotation running is likely to emerge after some time. When the changes act on the flotation, we hardly adjust the reagent dosage in response to the changes promptly only by bubble characteristics. It is clear that the feedback control methods cannot obtain the changes of slurry property in advance such that it needs more time to adjust the reagent dosage to achieve steady state of flotation running. From a control systems point of view, the fluctuations of slurry property act as disturbances which the closed-loop controller needs to reject. This is commonly known as disturbance feedforward control. Feedforward control can be very effective in improving control performance, especially if the disturbances can be measured. Further improvements are possible if the disturbance is known ahead in time. The feedforward control does not use observations from the actual plant response. Instead, this is left to the “feedback” component which monitors the actual response and makes appropriate adjustments. Combined feedforward and feedback control is applied in many fields. For example, an application of combined feedback–feedforward control to the wind turbine collective pitch and torque control problem in full-load operation is presented Considering poorly modeled flotation systems and operation experience, a combined feedforward and feedback (FFB) based control scheme of reagent dosage is presented to implement tracking for PDF of the desired bubble size. Instead of using feedback cancelation, a FFB-based control scheme of reagent dosage is firstly introduced for copper flotation. Here a fuzzy based feedforward compensator is developed to closely compensate the disturbances. Based on the previous works The rest of the paper is organized as follows: a copper flotation process is described and reagent dosage control modeling is discussed in Section A concise flow diagram of a copper flotation process can be shown in The copper flotation process consists of three flotation circuits, namely, a roughing circuit, a scavenging circuit and a cleaning circuit. In order to improve recovery, the concentrate of the scavenging and the tailing of the cleaning need to be regrinded for re-flotation. Each circuit is used to separate the specific mineral particles from slurry and has an individual ‘role’. For example, the roughing circuit carries out as far as possible easily floated valuable mineral particles from the gangue by adding Z200. The scavenging circuit separates hard-flotation valuable mineral particles from the gangue by adding butyl xanthates and BC. Therefore, the recovery is more important than the grade in the two circuits. The cleaning circuit, on the other hand, produces the final product, and therefore the grade of the concentrate becomes more important than the recovery. In sum, these circuits allow multistage treatment of the slurry to meet high product indices in the final product. According to expert experience, the reagent dosage control for the copper roughing has a very significant and direct impact on subsequent flotation circuit such as the copper scavenging and the copper clearing since most reagent dosages are added in the copper roughing. If the reagent dosage is not properly controlled in the copper roughing, the product indices of subsequent circuits are hardly implemented no matter how their operation parameters are adjusted. Therefore, the first cell of the copper roughing is regarded as a control object. In addition, The feed parameters (such as feed grade, feed flow rate, solid percent, particle size of solid and pH, etc.) always modify flotation performance. The feed grade is closely related to the criterion of bubble size. However, the feed grade remains fewer changes during flotation running since the raw ore of the plant comes from its own mines. The other parameters such as feed flow rate, pulp concentration and particle size of solid are controlled in the grinding circuit. When the fluctuation of the parameters directly impact on good flotation running, the reagent dosage need to be regulated to stabilize flotation running. The parameters should be necessary condition for successful flotation such that the fluctuation of the parameters are considered to be disturbance variables for flotation. During the production of flotation, the workers regulate the reagent dosage based on two principles. Firstly, the workers determine primary reagent dosage according to the feed grade and the handling capacity of ore when the flotation starts running. Secondly, the workers regulate the reagent dosage and pulp level again according to their observable bubble size each time regular inspection during flotation running. The reagent dosage and the pulp level need to be repeatedly regulated until the output bubble size meet their criteria. However, abnormal flotation such as froth outflow, pulp upturn and low pulp level, etc. sometimes occur for some reasons when the workers do not inspect the flotation process during flotation running. This cannot result in immediate respond to this situation, which is one of drawbacks of manual control mode. Considering flotation mechanism based reagent dosage control scheme is poorly modeled because of inherent complexity, dynamics and nonlinearity of flotation and the lack of testing equipments such as X-ray fluorescence analyzers, it is possible to build bubble size distribution based reagent dosage control algorithm since bubble size structure reflects important characteristics of flotation and responds to changes in the reagent dosage. By employing bubble size as process outputs, the output bubble size is capable to be predicted from the given the reagent dosage and the historical bubble size. Instead of using a concentrate grade or recovery, the PDF of bubble size can be used as a target variable. In addition, a feedforward compensator is added to regulate the reagent dosage in advance according to the feed disturbances in order to reduce the influence of large disturbances on flotation. Generally, for the use of feedforward control, two somewhat separate issues have to be solved. The first is the question of how suitable disturbance information can be obtained. The second is how this information can be used best to improve control performance. Fortunately, the solid percent, the slurry flow rate, the pulp level and the reagent dosage are capable to be obtained all the time and the feed grade is capable to be obtained by assay every 2 As discussed above, it is shown in Some intelligent control methods (such as fuzzy logic, ANN, case-based reasoning and expert system, etc.) have been applied to control many complex industrial processes due to their flexible requirements on the process model and their capability to incorporate human experience. Considering that the reagent dosage are sensitive to ore property and handling capacity, the workers at first roughly regulate the reagent dosage according to feed grade and handling capacity in practice when the flotation starts running. It is noticed that the expert knowledge about reagent dosage mainly comes from two aspects. Firstly, the reagent dosage is determined according to feed grade and handling capacity by a lot of process tests, which is taken as public knowledge and imparted to the workers in the plant. Secondly, the workers are capable to form their own unique expertise knowledge during reagent adjustment. The workers then regulate the reagent dosage mainly by their experiences. It is obvious that experiences and knowledge of the human operators provide a good qualitative model for initial reagent dosage control, which can be more easily imitated by the fuzzy logic system, which have been applied to many control problems of complex or poorly modeled systems. It is shown in According to Eq. The design of the controller represented by Eq. Fuzzy rules of fuzzy control based on fuzzy sets, fuzzy linguistic variables and fuzzy inference is designed according to priori knowledge and expert experience. To achieve fuzzy control for reagent dosage, the input variables need to be fuzzified to be fuzzy linguistic variables. And then the fuzzy linguistic output obtained by fuzzy inference need to be defuzzified to be a real output. On the assumption that the universe of the feed grade error Define seven fuzzy sets in the universe of According to the domain expert knowledge, a fuzzy rule base is established as shown in Since a result of the fuzzy inference output is a fuzzy set, it reflects that the fuzzy linguistic output of the control variable is a combination of the membership function of each element of the universe. To obtain the clear solutions of reagent dosage, the center of gravity method is utilized to defuzzify, which can be expressed as Denote The B-spline technology based estimator can be used to approximate the PDF of bubble size (the detail is seen in Compared with component analysis (PCA), partial least squares (PLS) and independent component analysis (ICA), etc. Since the weights of the PDF interact on each other, a combined fitting error is added to the regression model to measure the effect between these multiple outputs. Giving a training sample set denoted as Enlightened by the computation of single-output LS-SVM, we can consider an optimization problem with constrains of the multi-output one, where the errors come from not only each single output, but also the combined fitting error. The optimization problem can be described as To solve the optimization problem, the following Lagrangian function can be constructed, According to the Karush–Kuhn–Tucker condition, the partial derivatives of the variables are calculated as follows: Thus, combining Since the weights at time As for the MLS-SVM model, the parameters Let Two key factors for determining the optimized parameters should be considered. First, to implement a more stable optimization, the optimized hyper-parameters for MLS-SVM is encoded as Since the B-spline consists of the base functions and the corresponding weights, the PDF can be characterized by the weight vector on the assumption that the base functions are fixed. So, the weight vector of the output bubble size at time In In order to reduce the accumulated error of the predictive weight vector of the MLS-SVM, the feedback correction unit is designed. The output weight vector of the unit at time The output weight vector of the feedback correction unit at time By using Eqs. According to Eqs. Corresponding to Eq. The purpose of the controller design is that the reagent dosage Recently, the entropy concept has been widely used in stochastic systems As a summary, the calculating steps of the reagent dosage is given as follow: Step 1: Bubble is captured and bubble size feature is extracted. Step 2: The probability density function of bubble size is estimated by B-spline formula and the weights which characterize the PDF of bubble size is obtained (see the details in Step 3: The next weight at time Step 4: The weight error Step 5: The feedback reagent dosage Step 6: The actual reagent dosage at time Step 7: The reagent dosage is calculated again from step 1 to step 6. A series of industrial experiments are conducted in a Chinese copper flotation plant. The distributed control system (DCS) of the plant shown in As shown in According to the actual condition, the existing network needs to be reformed to realize the proposed method based reagent dosage control. In addition, the existing network tries not to be changed according to the plant's owner. Firstly, a froth image analysis network (FIAN) need to be built. The FIAN consists of image measurement device, network, an industry computer and software, etc. The camera is connected with the industrial computer through optic fiber. Secondly, the industrial computer is connected with the switch of the MPN and the RCN and exchanges data with them by OPC. As shown in Before flotation process experiment, some preparation work need to be done. Before the modeling, the systematic collection of statistical data of copper flotation production was carried out. As discussed above, the fuzzy based modeling for reagent dosage mainly depends on determination of characteristic parameters The parameters of MLS-SVM model include the widths In order to assess prediction performance, the root mean square error (RMSE) As discussed in Section It is noticed that the criterion of bubble size is closely related to the ore grade. If the ore grade fluctuates markedly, the corresponding reagent dosage need to be regulated and the criterion of the optimal PDF of the bubble size also varies under the same handling capacity of the raw ore. So the ore property is a prerequisite for reagent dosage control. Through process tests and expert knowledge, the weight vectors of the given PDF, which are likely optimal PDF of industry flotation bubble according to the feed grade, are set in The feed grade need to be assayed every 1 At the same time, the 3-D of weights tracking evolution in the first cell of roughing flotation is shown in In the industrial field, the product indices which the operators are most concerned about are closely related to employee performance evaluation. The eligible grade and recovery need to be larger than 14% and 0.55 for the copper roughing, respectively. To evaluate the effectiveness of the proposed control method, three different control modes are compared: a proposed mixed feedforward-feedback control method, a classical feedback predictive control method (the details are shown in The evaluation indices of flotation performance include concentrate grade, recovery and reagent dosage. Based on hourly sampling data during five day process experiments, compared with feedback predictive control and manual control, the values of sampled concentrate grade and recovery using the proposed method have smaller fluctuation scope, and are more above the desired values. In addition, The paper has solved the tracking control problem for bubble size distribution by the FFB-based controller in a copper flotation plant. First of all, a process description is presented and modeling analysis is discussed. A bubble size distribution based mixed FFB reagent dosage control structure is then proposed. In the proposed controller, the feedforward fuzzy compensation part provides advantages of easier implementation. Meanwhile, by using MLS-SVM, the feedback predictive part assures tracking implement for the given PDF. Finally, the existing DCS networks including the MPN and the RCN and the FIAN are discussed and then the flotation experiment is performed using the proposed algorithm. It is noticed that the unexpected emergency of the flotation sometime need manual intervention mode to guarantee the safety of production during the experiment period. Results show the benefits of using the feedforward action to attenuate the effect of typical flotation feed disturbances. The combined feedback and feedforward actions prove in most situations to be more efficient than individual actions. As a future work, multi machine vision based coordinated control for reagent dosage should be considered, including the copper cleaning and the copper scavenging. Data-driven based analysis campaign will be launched. Based on subsequent data analysis of all circuits, appropriate updates will be done for the reagent dosage controller in the copper flotation, and the performance of the updated controller will be analyzed. Another important future work is that joint probability density distribution (JPDF) based reagent dosage control is researched and developed. Image analysis done so far has indicated that the forth texture and the bubble size can be strongly correlated with the grade. So, froth texture and bubble size based JPDF reagent dosage control is well accomplished? This work was financially supported by