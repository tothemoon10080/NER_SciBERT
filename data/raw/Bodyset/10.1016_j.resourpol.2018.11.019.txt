Mining complexes are comprised of multiple mines and mineral processing streams, each governed by internal (mineral deposit, operation) and external (commodity prices) uncertainties, and must be optimized jointly to manage technical risk and maximize economic value. This study presents a method that optimizes annual production scheduling of an open pit mining complex by developing a solution that provides a unique strategic mine plan that integrates feasible alternatives over investment decisions along the life of the asset. Accordingly, the long-term optimization is presented as a dynamic plan, which allows planning upfront for possible configuration transitions due to new capital investments, facilitating change. This method uses an adapted multistage stochastic programming model which expands upon the two-stage framework by performing multiple recourse stages that are solved iteratively, allowing feasible mine designs in a scenario-tree structure. In this model, dynamic investment decisions are made sequentially over the mine production schedule of related mines, based on new information that becomes available in each time period; these decision variables activate costs and effects over the model, letting the optimizer choose the capital investments to be considered at the mining and/or processing components of the mining complex. A copper open pit mining complex is used to test the proposed model, with options to invest in the truck and shovel fleet, and a secondary crusher to increase related capacities. Results show a substantial probability that the mine design should branch, presenting an increased expected net present value of over US$170M compared to the two-stage stochastic formulation.Mining complexes are mineral value chains consisting of a continuous flow of material with several components: multiple mines, represented by orebody models discretized into mining blocks, mineral processing streams, and transportation systems to deliver products to customers. The performance of each component strongly depends on the other; as a result, these components must be modeled jointly and simultaneously optimized, accounting for profits from the final product(s) sold. The value generated by the synergies that exists between the components of a mining complex, and the need to simultaneously account for them within the strategic plan have been discussed in the technical literature ( Extensions of these optimization models, referred to as two-stage stochastic simultaneous optimization of mining complexes ( Existing two-stage stochastic mathematical programming models provide the framework need to generate strategic mine plans that allow meaningful assessments along with risk management and quantification (e.g.  Different efforts at including flexibility in mining operations can be found in the literature, considering uncertainties in commodity price, geology, or operating cost ( In the present study, a dynamic simultaneous optimization method is developed for the strategic planning of open pit mining complexes under supply uncertainty, where CAPEX alternatives are explicitly included in the formulation. As a result, CAPEX decisions are then taken dynamically as the optimization proceeds, reflecting the possible acquisition of information by adjusting the mine extraction sequence. Through the extraction of material during the initial mining periods, a better understanding of the geological (supply) uncertainty is acquired, allowing to adapt the production schedule for the subsequent years of the strategic planning of the mining complex. It should be noted that geological uncertainty corresponds to the uncertainty related to the concentration of elements of interest, as well as the material type of the rock, and is considered by using a set of stochastically simulated geological scenarios of the deposit, which represent the spatial variability of grades and material types, and are used as input to the optimization ( The next section describes the proposed method, mathematical model, and solving procedure implemented. Then, an application to a copper mining complex is presented, and compared to the traditional two-stage stochastic formulation. Conclusions follow. The proposed method is explained next through the example presented in The above example shows the importance of clearly defining when a solution should branch. This is done by setting a threshold that defines the representative proportion of scenarios which must differ in investment decisions for a solution to be divided into feasible branches, and it is a pre-defined parameter set by the operation's management. This threshold is used to filter irrelevant investment decisions and only consider potentially significant ones, avoiding designing complete mine plans for scenarios that have a relatively low probability of occurring. This parameter is defined in Eq. In the proposed approach, it is defined that only a selected sub-set of CAPEX alternatives can cause the mine plan to branch, thus, CAPEX decisions are divided into branching and non-branching alternatives ( The solving process proposed can be divided into steps that are repeated iteratively. Given that each production year is represented by Optimize the mine plan as a two-stage SIP (as in Freeze current year Optimize each active branch from While This process is repeated until all periods of the LOA of the mining complex have a unique design assigned to them. The mathematical programming formulation is presented next, and the implementation algorithm is available in The proposed model uses the formulation developed in Three main adaptations are made from the model presented in (  Mining complex constraints - Dynamic capacity constraints Dynamic non-anticipativity constraints Extraction decisions can be different between sets of scenarios (branches) Cluster destination decisions can be different between sets of scenarios (branches) Non-branching investment decisions are the same if branching is not “activated” Activation of branching in node ρ for t + 1 (only if ratio is within branching limits Set of scenarios per branch The presented objective function (Eq. The first section focuses on maximizing the profits obtained from selling at a discounted price (or cost) of The second term aims at minimizing capital expenditure costs, directly accounting for the cost of flexibility obtained from new investments along the life of the mine. Here The third term presents the penalties for deviating from production target are minimized, where Eqs. To develop a solving mechanism, the size of a global mining complex with multiple mines and multiple processing streams under geological uncertainty must be considered, which entails more than a million binary variables, with over a million constraints ( The following case study corresponds to a copper mining complex, presented in The orebody models of both mines are modeled with blocks of 20 × 20 × 15 m, and have one geotechnical zone, with slope angles of 45° and 40° respectively. Three different material types are considered: waste, oxides and sulfides, and 10 geological simulations of each deposit are used to represent the uncertainty related to copper grade and material type ( Three CAPEX alternatives (set    Details of each of the CAPEX alternatives are provided in The base case corresponds to the standard two-stage simultaneous stochastic optimization of the mining complex, where the scenarios are used to define a unique production sequence and destination policy. The truck, shovel, and secondary crusher purchase options are also included in the model as 1st stage non-branching option. There are ten and eight existing trucks as the initial capacity, which are available for the first two years of operation. Here, all scenarios are used to define one global mining and investment schedule. This solution determines i) when each block is extracted, ii) where it is sent according to its characteristics (grade, material type, etc.), iii) if a crusher is purchased, and iv) how many trucks and shovels are purchased per year (and thus the annual extraction capacity), respecting the parameters mentioned in The purchase plan generated is presented in The left side of The previous results are obtained from the schedule presented in In the following section the dynamic methodology proposed is applied. As explained in the method section, first an initial robust optimization is done, and second, an independent 2-stage stochastic optimization of the branches is performed. Step 1 – Initial 2-stage optimization In this case, In this case, by re-optimizing the mine plan considering dynamic investments, the optimizer shows a 42% chance of investing in a secondary crusher in year 3. As this 42% is within the representative threshold (30%–70%), the mine plan is divided at this point, and the two first periods are frozen from the two-stage initial model (i.e. the base case), as presented in Step 2 – Branching over the Design Once the initial stage of the optimization is done, the design options investing and not investing in the secondary crusher are explored. First, the optimized decision variables related to the extraction and processing of blocks scheduled in Step 1 are fixed (  In this case, the secondary crusher option is removed from the SIP model, and the model is re-optimized over the final periods of the mine plan (periods 3–20). The results obtained with the scenarios that decided not to invest in the secondary crusher are shown in  Next, the option considering the purchase of a secondary crusher is studied. In this case, the cost of the purchase is included in period 3, but the extra capacity is only available at period 5, as the secondary crusher option has a 2-year lead time ( The schedules obtained for each branch are presented in The biggest scheduling differences can be seen in Mine 1, where the schedule decides to go deeper earlier on the LOM when the secondary crusher is available (left side of The final dynamic solution is obtained by merging the initial design (periods 1 and 2 from Step 1), with the two parallel branches obtained for periods 3–20 in Step 2. This joint model presents a cumulative NPV which ranges between $5.13 and $6.10 billion US dollars (BUS$), as presented in The benefits of the proposed dynamic model can be seen in Results in An interesting fact that can in part explain the overall increase in NPV of the base case with and without alternatives, is the equipment acquisition. A dynamic SIP model is developed to include flexibility into the strategic planning optimization of an open pit mining complex. This is done by a decision-tree structure solving mechanism which allows developing different solution designs, given that a significant percentage of scenarios decide differently over a “branching option”. A case study is presented at a copper open pit mining complex comprised of two pits with two possible processing destinations and one stockpile, considers two investment options to purchase trucks and shovels for each pit, defining their extraction capacity, and a flexible investment option to add a secondary crusher to the main mill to increase its processing capacity. The first alternatives are considered “non-branching” options, and thus are optimized as 1st stage decisions within a branch, and the second is considered a “branching” option, meaning that scenarios could decide differently over investing in it or not, and thus, the solution design of the mine plan is allowed to branch into two parallel design options. Here, even though scenarios are free to decide differently over branching alternatives if the solution did branch, two-stage optimizations are performed over each branch. This procedure ensures that unique, operational schedules are produced for each of the controlled branches, which can be clearly followed by the operation. Results show that for the case study, there is a 42% chance of investing in the secondary crusher in year 3, representing an overall increase in NPV of over MUS$170 compared to the initial two-stage SIP solution. The application of the dynamic mathematical programming formulation presented herein shows that it is possible to identify and consider options that are potentially profitable, subject to the underlying uncertainties. Identifying these potentially profitable options in strategic optimization allows mine production plans of mining complexes to anticipate the effects of unveiling geological uncertainty through the development of feasible plans, thus capitalizing on the flexibility available as the life of the asset progresses. The methodology proposed dynamically alters the initial mine plan as more information is obtained, and implements optimized changes in an efficient manner, better equipping the operation to be prepared given the presence of geological uncertainty and take full advantage of opportunities while hedging from risk. Future applications will focus initially on improving the perturbation mechanism used in the adaptive neighborhood search simulated annealing for investment decisions, as these variables have a major effect on the objective function (for example, the cost of buying a secondary crusher is very large compared to the cost of changing a mining block's extraction period). This makes the CAPEX neighborhood highly volatile and thus, requires a considerable amount of corrective perturbations to make them attractive moves. Because of this, the periodicity of choosing this neighborhood should be adapted to give the optimizer enough time to improve a large change. For this, a mechanism such as a Tabu list can be explored. Also, an in-depth study should be performed over the number of scenarios required to ensure convergence of the solution. Finally, coming work will also concentrate on extending the formulation to include other alternatives within the mining complex, such as operational modes to better control relevant variables affecting the system, particularly geometallurgical attributes. This work is funded by the National Science and Engineering Research Council of Canada ( Supplementary data associated with this article can be found in the online version at 