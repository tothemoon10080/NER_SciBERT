This paper describes a novel feed-hopper level estimation and control scheme for addressing the known problem of unreliable and occasionally corrupted feed-hopper level measurement in a cone crusher. The approach involves estimating the feed-hopper level with an adaptive time-variant state estimator. The proposed adaptive scheme delivers asymptotically unbiased feed-hopper level estimates, despite using an inherently biased state estimator with biased measurement(s) and/or model, and therefore addresses the common pitfall of state estimators.
                  The paper details the entire control system design procedure, from the fundamental theory, through dynamic modeling and estimator/controller tuning, to the design validation and control performance evaluation. The performance of the proposed scheme is evaluated through extensive full-scale tests in various production scenarios, including process start-up, level setpoint changes, and mass flow disturbance rejection.
                  The full-scale tests revealed a number of benefits compared to the straightforward level control implementation. These benefits include the possibility of recovering from a temporary loss of measurement signal, smaller control effort, and increased system robustness due to an increased ability to withstand measurement errors. Therefore, the proposed scheme will enable more consistent size reduction and provide protection against performance degradation and process down-time.Crushing is an essential high-volume processing stage in the aggregates, mining and cement industries. The sheer amount of yearly worldwide production is immense: 40.2 billion tons of construction aggregates (2012), 1.57 billion tons The process control of a modern crushing circuit comprises two principal control tasks: Size reduction control Mass balance control The objective of mass balance control is to ensure that sufficient feed material is always available (to be crushed and discharged from the circuit), whereas the size reduction control usually aims to produce desired particle size distribution (PSD). These main control tasks interact with each other. Controlling mass balance affects (acts as a disturbance on) the size reduction, and actions to control the size reduction influence the material distribution (accumulation) and flow rates (proportion of different fractions) inside the circuit. To meet market or downstream demand, it is necessary to ensure both main control tasks are performed sufficiently. This enables the true potential of the circuit. The most common form of mass balance control is the level control of intermediate buffers such as bins, silos, feeders, and feed-hoppers that are used to prevent the disturbance propagation in the circuit by disconnecting the dynamics between input and output flows. Level control schemes can be roughly divided into averaging level control and tight level control. Averaging level control is used when the buffer level should be allowed to fluctuate (to make full use of available surge capacity), and tight level control when the efficient use of equipment or meeting process targets requires this. Cone crushers require tight feed-hopper level control because the recommended mode of operating is choke feeding, wherein the crusher inlet is fully covered with feed material ( Sensors are an essential part of the feedback control as the quality of the measurement directly affects the control system performance. Better measurement quality results in more accurate control with less control action. Sensor problems leading to faulty measurement values, excessive measurement noise, or even loss of measurement signal are detrimental to system performance; they force the control system to respond to wrong information that does not reflect the actual process state. The cone crusher feed-hopper level is typically measured using either ultrasonic or microwave sensors ( To address the problem of unreliable and possibly corrupted feed-hopper level signal, this paper proposes an approach to estimate the true value of the feed-hopper level using a state estimator. A state estimator is a system that combines the available knowledge using the fusion of dynamic process model, measurements A state estimator is an unbiased estimator that provides unbiased state estimates, but only if both the model and the measurement(s) are unbiased. To overcome this requirement, the paper proposes adapting the process model parameters online to guarantee asymptotical decay to the zero-mean steady-state estimation error. This approach makes it possible to achieve unbiased state estimates, despite biased measurement(s) and/or model (a common pitfall of state estimators). Using a state estimator offers a possible remedy for known feed-hopper level measurement challenges detrimental to the cone crusher feed-hopper level control system and crushing circuit performance. The benefits of the proposed approach include the possibility of recovering from a temporary loss of measurement signal, more consistent level control with less control effort (as a result of decreased sensor noise), and increased system robustness due to increased ability to withstand measurement errors. Section  Crushing liners are subject to wear; regular replacement and wear compensation are required. To provide maximum throughput, reduce wear, and minimize the crusher stresses, a mode of operation wherein the crusher inlet is fully covered with feed material (choke feeding) is recommended ( Cone crusher size reduction can be affected by three possible manipulated variables (MV): Closed side setting (CSS), governing the volumetric capacity of a crusher; Eccentric speed ( Feed rate/feed-hopper level ( CSS is the most commonly used variable to control the size reduction (  The consistency of the measurement is a prerequisite for the correct behavior of a feedback system; sensor problems, such as loss of measurement signal, will result in undesired behavior and possibly catastrophic consequences, because the control system’s feedback path is broken. A state estimator is a versatile tool used to perform signal filtering and state estimation of unmeasured (or unavailable) process states of a real system. State estimators combine the available knowledge using the fusion of measurements A classic use case of the state estimator is in a GPS-guided car driving into a tunnel. Knowing the current location, steering angle, and vehicle speed, the location of a vehicle can be estimated despite a total loss of GPS signal. In the most common case (no integrated speedometer or steering angle measurement) the position is updated under the assumption that the vehicle continues moving in its current direction with unchanged velocity. Cone crusher feed-hopper level control has been previously discussed by   Consider a discrete-time linear time-invariant (LTI) state-space system with additive inputs for process noise A sufficient condition for the availability of a stable solution to the estimator design problem is that the system By definition, a system is observable if it is possible to determine the state of the system A discrete-time predictor-corrector state estimator based on measurements up to The calculation procedure is iterative, and each iteration involves two steps: the measurement update (correction) and the time update (prediction). When the new measurement becomes available, the corrected state estimate The state estimator is essentially a negative feedback filter (or a proportional controller) that acts on difference The purpose of the state estimator is to minimize the error between true state The estimator tuning problem can be interpreted in such a way that the estimator gain matrix There are two analytic methods to tune the state estimator: the deterministic pole placement method and the stochastic Kalman filter method. In the pole placement method, the objective is to select In practice, these methods provide a starting point for the estimator tuning; the design still requires validation. The validation can be performed offline if the suitable process data set is available. Adjustments are often required due to inaccurate process model (for example, nonlinearity, unmodeled dynamics), sensor biases, or inability to quantify the process noise In the pole placement method, the objective is to determine the coefficients of the gain matrix The Kalman filter is an optimal unbiased linear quadratic state estimator for the observable LTI system The measurement update equations of the time-variant Kalman filter are The steady-state Kalman filter gain Consider the linear-geometry feed-hopper of a cone crusher and a cone crusher feed-hopper level control arrangement illustrated in Control systems are typically implemented on the sampled-data systems (digital computers), in which the discrete-time process data is obtained by sampling from the “physically” continuous-time system ( An equivalent discrete-time state-space model can be obtained from the following equations by assuming zero-order hold for the input Full-scale tests were conducted at the tertiary stage of the NCC Roads’ Glimmingen aggregates production plant, located 80 The tertiary stage of the Glimmingen aggregates production plant produces six high-quality aggregate products in the sizes between 0–2 The plant automation is built on a Schneider Modicon PLC. Cone crusher feed-hopper level control is realized using a discrete-time incremental PI controller The plant operator is conceptually responsible for the plant performance by setting target parameters (setpoints) for the size reduction process. The operator receives a number of process measurements including crusher power The tertiary crusher of the plant had been suffering from sluggish and oscillatory feed-hopper level control, which was first addressed by retuning the existing level controller. Further inspection revealed severe level sensor problems (including reflections during idling, and loss of measurement signal during transients and especially during the process start-up), which occasionally led to corrupted level measurements and unsatisfactory control performance. Furthermore, the feasible level control range was limited to values above 60% because the measurement signal was corrupted in the range of 40–60%. These problems triggered the need to try to address the sensor problems with a state estimator. The state estimation algorithm given by For data logging, a PC with a remote desktop, OPC server (sample time The initial tests revealed an occasional bias on the feed-hopper level estimates. The bias appeared as a result of several factors: an occasional zero-level bias in measurement In addition, estimator gain(s) regarding the measurement The state estimator and the controller are both essential parts of the feedback loop. In order to achieve desired control loop performance, they both should be appropriately tuned. A general rule is that the state estimator poles should be significantly faster than controller poles ( The block diagram of the feed-hopper level control loop is presented in A continuous-time The feed-hopper level controller was tuned analytically by using the deterministic tuning rules presented in The tuning will theoretically yield the following second-order closed-loop responses for the setpoint changes, The tuning formula that yields critically damped responses (that is, a relatively fast return to the setpoint without oscillation, The static gain matrix Ability to recover from loss of measurement signal (level estimate trajectory collides with the real level measurement when the measurement signal is retained). Sufficient measurement signal smoothing. The state estimator tuning started by quantifying the stationary measurement noise covariances from the process data. Obtained uncorrelated stationary measurement noise covariance is given by Several different tunings were tried and based on a visual evaluation of the several data sets the following uncorrelated estimator gain matrix was selected An excitation signal consisting of a sequence of To validate the combined controller/estimator design and to quantify the effect of Data preprocessing: Data is split into training (350–3566 Correlation analysis: Model structures (model orders and possible time delays) are determined through a nonparametric data-driven estimation of the finite impulse response (FIR) models and available process insight. Parameter estimation: Parameters of the continuous-time transfer function models are estimated using an iterative, nonlinear, constrained least-squares algorithm to minimize the weighted sum of the squared errors cost function. Validation: Model structures and parameter constraints are updated iteratively until the independence test (cross-correlation between past inputs and model residuals) and the comparison between simulated time response and validation data set gives satisfactory results. The goodness of the model fit between the simulated model and the validation data set is calculated using normalized root -mean-square error (NRMSE) for each output The control performance is evaluated using standard criteria based on time responses Responses on setpoint changes and external disturbances (disturbance rejection) are quantified by the maximum error Besides output performance, we are also interested on the amount of control action used to achieve the desired response. Typically, we strive for reasonably limited controller action because excessive control action decreases the actuator lifetime. There are advanced control methods that seek to find the settlement between the response speed and the control effort (an obvious trade-off). Such control methods (including optimal control and model predictive control) are however beyond the scope of this paper. Instead, the control effort is evaluated separately from the control performance, by using stationary variance (and standard deviation) of the input This section presents the results from the process experiment. The objective is to show the benefit of the proposed adaptive state estimator on a cone crusher feed-hopper level control loop with uncertain and sometimes corrupted level measurement. The control scheme design consisting of an analytically tuned controller and an empirically tuned state estimator is validated through comparison with the identified closed-loop process model. One of the objectives of implementing a state estimator was to remove the contribution of sensor noise The sensor noise can be either attributed to electrical noise affecting the measurement signal; or an actual but undesired contribution in measurement, such as a single rock affecting the surface measurement (feed-hopper level) or horizontal belt movement and varying friction of belt idlers (power-based mass flow measurement).  To quantify the state estimator’s capability to decrease the amount of control action, an experiment to compare the level controller with and without the state estimator was performed. The experiment results are illustrated in The experiment results reveal that the stationary variance of the control effort of  The full-scale experiment results show that the state estimator is able to recover from loss of measurement signal. However, upon analyzing the results further, it was discovered that the plant control system contained a forced 30-s start-up sequence at To test the behavior of the state estimator with the actual control signal (including the forced sequence), a new simulated experiment was conducted. In the simulated case, the power-based mass flow measurement was replaced with the belt scale measurement which was shifted 5 The simulated results indicate that the state estimator is able to deliver realistic level estimates despite the total loss of measurement signal. However, it is not realistic to assume that such a situation could be sustained infinitely. The results show that with the current state estimation algorithm, the mass flow sensor should preferably be placed directly after the crusher (delay-free measurement) and be of the instantaneous type. To assess the control performance of the implemented level control/estimation scheme on disturbance rejection and setpoint/reference tracking, a test procedure consisting of The disturbance rejection was tested by subjecting the level controller to the crusher throughput disturbances. These disturbances were generated by 3.33 The results indicate that the overall control performance is at a level satisfying the requirements typically set for crushing applications: well-behaving control with a reasonable amount of control action, limited overshoot without oscillation, asymptotic decay of control errors with sufficient decay rate, ability to follow setpoint changes, and capability to reject external disturbances. Further performance analysis and comparison between the realized and the designed performance are presented in SubSection The proposed state estimation scheme addresses the problem of biased process model (bias/nonlinearity in feeder and measurement Further analysis of the data revealed a 96 To compare the analytic tuning results with the realized control performance, dynamic process models were identified based on the experiment data. The identified deterministic continuous-time process model of the process is given by This model is a dynamic representation of the Glimmingen tertiary stage. As such, the model does not take the effects of CSS and wear into account. These effects can be included in the simulation by choosing appropriate initial values (CSS, no dynamic adjustment) and incorporating the effects of wear observed during the experiment: The simulated (infinite-steps-ahead prediction) time response of the identified model Besides valuable information about process dynamics, the model also provides information on the steady-state behavior through model DC gains. This information can be obtained from Another interesting result is the effect of eccentric speed on the variance of crusher power. The results in To validate the overall feed-hopper level estimator/controller design, a comparison between theoretical responses The visual response comparison reveals that the estimated level matches the design satisfactorily, while the measured level (and hence the identified model) differs from the intended design. For a fair performance comparison, an identified response should be used instead of a measured response; the measured response is the only signal that contains measurement noise. Care should be taken to ensure the identified response matches the measured response. The results indicate that the observed control performance somewhat differs from the intended design. There is more overshoot than designed in the larger downward setpoint step change, but the overall response is faster and the performance is generally better than designed. On the other hand, the smaller upward setpoint change experiences worse performance than designed and a sluggish response, especially in the close proximity of the setpoint, but has no overshoot. Similar sluggish response is seen in the disturbance rejection, where the disturbance arrest time is slower and the maximum deviation from the setpoint is larger than intended. Consequently, the performance is worse than designed, especially according to performance indices that emphasize the errors later in the response. The possible reasons for the performance differences between the designed and realized implementations are: The process model used in the control design is based on rough estimates on, for example, feed-hopper dimensions. The actual process model is not a pure integrator due to the effect of The actual value of feeder gain The state estimator is not considered in the controller design. The uncertainty of level measurement The averaging nature of power-based throughput measurement limits the state estimator response speed on mass flow disturbances. There is a doubt that the realized control signal might be limited to integer values. Thus, the control performance in close proximity to the setpoint would be handicapped. The process model does not consider the volume inside the crusher. This paper has put forth a feed-hopper level estimation and control scheme to address the known problem of unreliable and possibly corrupted feed-hopper level measurement in a cone crusher. The proposed method involves a novel approach for estimating the true value of the feed-hopper level with an adaptive time-variant state estimator. The adaptive approach provides asymptotically unbiased feed-hopper level estimates despite using an inherently biased state estimator with biased measurement and model. The proposed feed-hopper level estimation/control scheme was tested in a full-scale aggregates production plant. The extensive full-scale testing involved various production scenarios, including process start-up, level setpoint changes, and disturbance rejection due to crusher throughput step changes. Despite the minor performance differences between the designed and realized estimator/controller system, the observed control performance was at a level satisfying the requirements typically set for crushing applications: asymptotic decay of control errors with sufficient decay rate, limited overshoot, and reasonable amount of control action. The full-scale tests revealed a number of benefits over the straightforward level control implementation. These benefits include: The possibility of recovering from a temporary loss of measurement signal. Less unnecessary control effort and lower actuator stresses through filtered measurement. Deterministic controller tuning can be applied with noise-free level estimates. Increased system robustness due to increased ability to withstand measurement errors. Future work will encompass: using eccentric speed This work was funded by the