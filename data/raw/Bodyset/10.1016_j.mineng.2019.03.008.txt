In geometallurgy, a process model operating at the mineral liberation level needs quantitative textural information about the ore. The utilization of this information within process modeling and simulation will increase the quality of the predictions.
                  In this study, descriptors derived from color images and machine learning algorithms are used to group drill core intervals into textural classes and estimate mineral maps by automatic pixel classification. Different descriptors and classifiers are compared, based on their accuracy and capacity to be automated. Integration of the classifier approach with mineral processing simulation is also demonstrated. The quantification of textural information for mineral processing simulation introduced new tools towards an integrated information flow from the drill cores to a geometallurgical model.
                  The approach has been verified by comparing traditional geological texture classification against the one obtained from automatic methods. The tested drill cores are sampled from a porphyry copper deposit located in Northern Sweden.Drill core logging by geologists commonly includes a qualitative description of the lithology, mineralogy and ore textures. It is not only a cost and time consuming method, it also relies on each geologist knowledge and experience ( Textural information is critical for detailed modeling of the downstream process. The impact of particles of different textures on hydrocyclones classification, sintering and ultrasonic treatment of iron ore has been studied by Quantified mineralogical information (modal mineralogy and mineral texture) can be obtained at different scales (on particles or on intact ore). On particles, methods to quantify the mineralogy by using the routine chemical assay to convert the elemental components into mineral grade have been developed and tested on iron ore operations. Common methods to study textures at the particle level include scanning electron microscopy (SEM) and optical microscopy. Textures have been analysed on optical images by The development of technology in image acquisition and image processing combined with the increasing computing power enables the integration of a wide range of sensors in drill core scanning devices. However, the acquired signals should be relevant to the problem at hand. A geometallurgical model consists of two main parts: a spatial model and a process model. Drill core samples are adequate for geometallurgy since they are collected in any case for exploration and resource estimation purposes. Different small-scale tests can be conducted on such samples, for example in comminution ( Texture is among the parameters that influence the processing behavior of an ore and has been carefully studied in different deposits ( A general approach based on particles and their mineralogy has been described by In this context, the present work aims at using drill cores to acquire information about texture. Recently, interest in automated drill core scanning has increased, with extensions towards 3D textural analysis ( A systematic approach to texture classification is developed and used to study the potential of several textural descriptors (or features) and classifiers in an automated logging process. Images of the original dataset are taken with a Canon Pro 815 camera and a pixel size of 0.12 mm The data set is then randomly cropped and rotated to generate images of different sizes and 3 color channels for feature extraction and classification purposes. The complete dataset includes 1509 images in 15 textural classes. In general, the definition of classes depends on the deposit and its variability. The samples have been collected from a selection of drill cores provided by the mine geologists. To ensure that the dataset is representative of the textural variations in the ore body, the selected samples were further studied and compared to previous work on Aitik deposit ( For image processing purposes, Fiji ( The selected case study is the Aitik Cu-Au-Ag mine, operated by New Boliden, located south of Gällivare, northern Sweden, which is the largest copper mine in Europe. Aitik operates with a head grade of 0.23% Cu, 1.8 g/t Ag and 0.13 g/t Au with chalcopyrite as the main copper mineral ( Spatially distributed drill core samples of all rock units in the mine were sampled and mapped based on their geological features and their estimated metallurgical performance. Fifteen textural classes representing the hanging wall, ore zone and footwall are, on a macroscopic scale, classified into different textural and metallurgical classes giving broad ranges of textures for each rock unit ( Geometallurgical classes have been defined by grouping samples with a similar mineralogy and Bond work index ( In this case study, two textures, one from the mineralized footwall and one from the main ore zone are described in detail and used to demonstrate pixel classification ( The first step is to acquire images of halved drill cores with sufficiently high resolution. Features are then extracted from the image and stored in a data set. Depending on the values of the descriptors, a classification algorithm assigns a texture class to each image. Once the class is known, the adequate pixel classifier is chosen, and the mineral phases of the drill core are identified. If the textural class is known and the modal mineralogy is estimated, the knowledge is sufficient to build a stream file for process simulation. The simulation software (in this case HSC Sim, v9.0 Outotec) uses the constructed feed to calculate every stream including the concentrate and tailings stream (in terms of recovery per mineral, flow rate, particle size distribution). Among the most popular textural features extraction methods, two main approaches are selected: grey-level co-occurrence matrix (GLCM) statistics and local binary patterns (LBP). GLCM descriptors have been introduced by Another class of descriptors is wavelets. As an extension of the frequency analysis performed by Fourier filter banks, wavelet filters decompose the signal of an image into different frequencies at different scales. In this implementation, a Haar wavelet multi-scale decomposition ( LBP have been introduced by The result of feature extraction is a vector that contains the texture descriptors associated with a given input image. When several descriptors are combined, the resulting feature vector is the concatenation of each individual descriptor feature vector. The main purpose of this work is to classify images into textural classes. The dimensionality of images is very high due to their dimensions and color depth information. The main idea behind classification algorithms is to find a transformation that reduces the dimension and defines boundaries between images of different classes. Classifiers are functions that assigns to each feature vector a texture class. Two main families are used: unsupervised and supervised classifiers. Unsupervised methods rely on the data itself to learn a classification whereas supervised methods learn a classification based on examples provided by the user. Supervised classification can be thought as teaching by examples: a sufficient number of example pairs (feature vector, actual texture class) is provided and the classifier builds a function that assigns a class number, ranging between 1 and 15, to the feature vector. In general, the obtained models map an input to an output but cannot always be described by a linear or analytic function. This approach leads to a classifier model that is trained to reproduce and generalize the behavior of the human operator that provided the examples (training set). In practice, unsupervised methods do not guarantee a classification that respects a pre-existing descriptive classification for example done by geologists. K-Nearest Neighbors methods ( Random Forests ( Support vector machine (SVM) is based on finding a hyperplane that maximizes the distance between feature vectors belonging to different classes. Since the boundary between classes can be complex in high dimensions, a function that maps the feature vector into a space in which the boundary is linear is computed by optimization ( Artificial neural networks (ANN) is a method based on the construction of a function represented as a series of weighted sums. The weights are organized in layers that defines the order in which the sums are computed. The input layer has the same number of weights as the components of the feature vector and the last layer has one weight for each class (15). Several layers can be placed in between and connect the input to the output, they are called hidden layers. At first, the weights can be random numbers. When an example data is provided, the difference between the actual class to which the image belongs and the predicted class by the network will provide and error. As the number of examples increases, the network will adapt the weights to minimize the classification error. Once the acquired image is classified, the set of probable minerals can be reduced. It is thus possible to classify pixels from the original image into minerals. A machine learning approach is chosen, based on a random forest classifier and image features. This procedure allows the pixel classifier to learn from the geologist and improve every time new training data is provided. Using Fiji/ImageJ image processing software and its trainable Weka segmentation plugin ( This section presents the results of the numeric experiments for each of the steps presented in The capacity of texture indicators to be automated depends on the resources needed to extract features. The GLCM features include the wavelet decomposition which increases their CPU time. Each data set is tested with each classifier using 15-fold cross validation. The original sample is split into 15 subsamples (of size 100 in our case, one of these is kept as validation data while the rest is used to train the model. The procedure is repeated 15 times so that all the data has been used for validation. The results are averaged over the 15 folds to produce a single estimate. This is the list of selected data sets LBP: Local binary patterns HaarLevel2: GLCM statistics from Haar wavelet decomposition at level 2 HaarLevel3: GLCM statistics from Haar wavelet decomposition at level 3 LBP + HaarLevel2: Combination of LBP and HaarLevel2 descriptors RF: Random Forest SVM: Support vector machine with sequential minimal optimization (SMO) kNN-p2: k-Nearest Neighbors classifier with a Euclidean distance kNN-p1: k-Nearest Neighbors classifier with a Manhattan distance kNN-p1.5: k-Nearest Neighbors classifier with a Minkowski distance (p = 1.5) ANN: Artificial neural network with 3 hidden layers Different metrics can be used to compare classifiers, in this case Matthews correlation coefficient is presented in By adding the time needed to extract features from one image to the time needed to classify that image, the total time to process one image can be estimated. If these values are transformed into a time score with value 0 for the longest time and 1 for 0 s of processing, a global score can be built as the product of Matthews correlation coefficient and the time score. This helps ranking the performance of a given combination of features and classifiers, the objective being to be as close as possible to 1. The equal weights on classification and time scores is justified by the balance needed between accuracy and time needed in an in-line industrial measurement system. For different applications, different scores can be built by constructing a score function with variable weights or even other statistics. The results shown on As an example of pixel classification, the two classes introduced in Section 2.2 are presented. The first pixel classifier is trained using the coarser grained plagioclase-porphyritic quartz monzodiorite rock type. In total four different minerals are identified. The major minerals are plagioclase, quartz and biotite occurring as granular matrix cross-cutting by smaller veins of quartz. Minor amount of chalcopyrite exists as smaller patches. To train the classifier, three different images of the same texture class are used ( The stepwise procedure described above is applied to the garnet-bearing biotite schist/gneiss rock type. Five different images of the same texture are used to train the classifier and the image presented in A matrix of fine-grained feldspar and biotite is identified with larger veins and patches of chalcopyrite, pyrite, as well as irregularly distributed magnetite ( The validation of pixel classifier is done by comparing the results from SEM and visible light pixel classification. On The mineralogy estimates from visible light segmentation can be compared to the SEM-EDS measurements. One can observe in The results suggest that visible light image can be used for phase identification after textural classification constrained the mineralogy. Training the segmentation model requires mineralogists’ and geologists’ expertise but once trained, it can be automated. Further validation has been continued in a master thesis at Luleå University of Technology by The case study has revealed several critical steps. The first one is the definition of appropriate geometallurgical classes based on rock types but also process performance (either estimated from laboratory tests or plant survey). The underlying assumption is that a correlation exists between the meso texture observed on the drill core surface, its micro texture as seen under a microscope and its behavior in comminution and concentration. There is a need for a measure of similarity between different scales of textures. The second challenge is to define the boundaries of the approach: in this case study, a good knowledge of the geology is needed as well as variability in textures and enough drill core images to use machine learning tools. This challenge is directly linked to the process model: each geometallurgical class must be tested at a level sufficient to build a stream file and run a process simulation based on a feed derived from texture classification. Validation of the pixel classification algorithm is important since the verification presented in this work is based on observations presenting the same risk of bias as drill core logging by visual inspection. Benchmarking different combinations of textural features and classifier is a tool for decision. The first requirement is a suitable metric that includes both texture discrimination accuracy and speed requirements. This study proposes a global score in this study, but other options should be investigated. Once drill core intervals can be classified into textural classes, this information can be used to build a geometallurgical model. Assuming a reliable model exists for the process and blending strategies are known, the appropriate stream can be constructed for the feed. The integration of textural information into the spatial model (block model) is still a challenge but different approaches have been studied in literature. Textural classes can be used for process simulation. If chemical assays of the current drill core are available, the appropriate element-to-mineral conversion (EMC) recipe can be selected (with correct minerals and the exact mineral compositions if available). In that case, the quality of the modal mineralogy estimate is improved. In absence of chemical assays for every drill core, its textural class can be used to choose the appropriate pixel classifier and estimate the mineralogy at the surface of the drill core. Grinding tests results and modal mineralogy provide enough information to simulate the concentration processes at the 2D level (i.e. minerals by size, Integration of the mineral processing parameters into a spatial model has multiple approaches due to their variety: recovery, throughput, energy and reagent consumption, degree of liberation, texture etc. Having different natures, mineral processing parameters or geometallurgical parameters will have different properties when propagated in the spatial model. These variables can be classified as continuous (e.g., elemental and mineral grades, Davis tube recovery, A * b, solubility ratio, liberation) or categorical (e.g., lithology, hydrothermal alteration, ore type, textural class). For sampling and modelling purposes it can be important to distinguish intrinsic properties called primary parameters (e.g., mass, color, specific gravity) from process-dependent ones, called response (e.g., throughput, recovery, grindability) parameters. This classification was introduced by Limitations of spatial modelling of the geometallurgical parameters caused by nonlinearity or non-additivity have been highlighted by multiple scholars ( One possible solution for overcoming non-additivity issue is spatial simulation of the ore body ( Most common techniques for propagating geometallurgical parameters into a block model include: geostatistical interpolation (kriging, inverse distance), geostatistical simulation, regression, machine learning, domaining, classification or their combinations. Some of those are listed in Comparison of combination of different textural descriptors (features) with different classifiers in terms of accuracy but also speed (with automation and integration in a geometallurgical program in mind) suggests that the combination of local binary patterns (features) and random forests (classifier) is suitable for classifying the selected textures of Aitik. However, further validation on new samples or ore types is required. Using a new dataset would allow a proper validation of the current models. If needed, the existing models can be updated until the requirements for industrial application are met. The proper validation of pixel classifiers would require not only a comparison of the frequency of each phase but also textural features like association index and grain shape. The approach with a limited number of features and a simple but efficient classifier allows reaching performances close to a real-time drill core texture classification system. Depending on the objectives of the industrial application, a score based on a weighted average of the time and classification performances can be built. The value for geometallurgy is to maximize the information extracted from samples available at an early stage. Building a stream file for an integrated simulation is possible, however the link between meso- and micro-texture should be studied in more detail to simulate the process at the liberation level. The combination of automated drill core scanning with a process and a spatial model inside a geometallurgical model should be the scope of future studies. The authors wish to thank Boliden for their support in this study, Prof. C. Wanhainen and Glacialle Tiu for interesting discussions about the Aitik deposit and the two anonymous reviewers for their valuable comments. This work is part of PREP project funded by