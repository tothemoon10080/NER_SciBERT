Southwest Yunnan is one of the most important tin (Sn) metallogenic belts in China. The Sn mineralization is mainly linked with the Cretaceous and Cenozoic magmatism. Triassic granitoids are also widely developed in this region, where the Yunling granitoids are considered to represent an essential target for the localization of Sn mineralization. However, the source characteristics of these ore-related granitoids are still unclear. Here we present geochronology, petrology, and mineral geochemistry to reveal the petrogenesis of Sn-rich magma. Zircon U-Pb dating indicates that the Yunling samples were emplaced at 220–209 Ma, suggesting that the Late Triassic magmatism in the Yunling district along the S–N trending Changning-Menglian suture zone (CMSZ) was generated at the post-collisional stage. Samples from the Yunling pluton exhibit a variable SiO2 content of 54.8–68.5 wt% and are characterized by a high normative corundum content (>1 wt%) and aluminum saturation index (A/CNK = 0.84–1.17). Systemic zircon geochemistry suggests that these samples belong to S-type granite. Moreover, the granitoids have extremely enriched Nd-Hf isotopic signatures with εNd(t) values of −11.5 to −10.7 and εHf(t) values of −21.6 to −10.6. These findings, together with the elevated Ba/Pb ratios and high zircon Ti temperatures (≥800 °C), indicate that the Yunling S-type granitoids were likely to have been derived from the dehydrating partial melting of biotite in the metasedimentary rocks at high temperatures. In addition, the magmatic oxygen fugacity obtained from the magmatic accessory minerals suggests that the ore-related granitic magmas are highly reduced, with the estimated ΔFMQ (fayalite-magnetite-quartz buffer) generally ranging from −5.45 to −0.22 (-3.48 on average). Based on these results, we conclude that the decomposition of biotite in the source effectively extracted Sn, thus forming initial Sn-rich melts which crystallized and differentiated at a low oxygen fugacity and were eventually deposited in the shallow crust to form the Yunling Sn-bearing granitoids.